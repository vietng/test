{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to SWFT Vendor Portal documentation Architectures Solutions Design Integrated Solutions Design Vendor Portal Cognito Authentication and Authorisation FAQs","title":"Home"},{"location":"#welcome-to-swft-vendor-portal-documentation","text":"","title":"Welcome to SWFT Vendor Portal documentation"},{"location":"#architectures","text":"","title":"Architectures"},{"location":"#solutions-design","text":"Integrated Solutions Design Vendor Portal Cognito Authentication and Authorisation","title":"Solutions Design"},{"location":"#faqs","text":"","title":"FAQs"},{"location":"isd/","text":"Integrated Solution Design Major components Extraction and Load service (1) Workflow See here Prerequisites None Solution Design Discussion The team has investigated a few options to pull C&P and Work order into SWFT. Option 1 Description Extractor uses Enterprise Data Platform (EDP/Snowflake) Data APIs to extract relevant data and load into SWFT staging datastore. Snowflake will manage application access through Application Integration Schemas (AIS). The AIS aims at providing an \"API contract\" with guaranteed backward compatibility (through view versioning) to applications. Each application will have its own AIS created to cater for application specific data needs, security, schema etc. Related: See SWFT-ADR-002 Prerequisites Access to Data APIs and the relevant schemas All data must be pulled into Snowflake, cleansed, transformed and made ready for consumption via AIS and Data APIs Blockers C&P data is not yet in Snowflake Other data such as Work Order is not ready for consumption via API. S4 upgrade in progress/planning Discussion Use a time-based trigger (AWS EventBridge event) to trigger the extractor | Dependency factor High Architecture/Technical alignment High","title":"ISD"},{"location":"isd/#integrated-solution-design","text":"","title":"Integrated Solution Design"},{"location":"isd/#major-components","text":"","title":"Major components"},{"location":"isd/#extraction-and-load-service-1","text":"","title":"Extraction and Load service (1)"},{"location":"isd/#workflow","text":"See here","title":"Workflow"},{"location":"isd/#prerequisites","text":"None","title":"Prerequisites"},{"location":"isd/#solution-design-discussion","text":"The team has investigated a few options to pull C&P and Work order into SWFT.","title":"Solution Design Discussion"},{"location":"isd/#option-1","text":"","title":"Option 1"},{"location":"isd/#description","text":"Extractor uses Enterprise Data Platform (EDP/Snowflake) Data APIs to extract relevant data and load into SWFT staging datastore. Snowflake will manage application access through Application Integration Schemas (AIS). The AIS aims at providing an \"API contract\" with guaranteed backward compatibility (through view versioning) to applications. Each application will have its own AIS created to cater for application specific data needs, security, schema etc. Related: See SWFT-ADR-002","title":"Description"},{"location":"isd/#prerequisites_1","text":"Access to Data APIs and the relevant schemas All data must be pulled into Snowflake, cleansed, transformed and made ready for consumption via AIS and Data APIs","title":"Prerequisites"},{"location":"isd/#blockers","text":"C&P data is not yet in Snowflake Other data such as Work Order is not ready for consumption via API. S4 upgrade in progress/planning","title":"Blockers"},{"location":"isd/#discussion","text":"Use a time-based trigger (AWS EventBridge event) to trigger the extractor |","title":"Discussion"},{"location":"isd/#dependency-factor","text":"High","title":"Dependency factor"},{"location":"isd/#architecturetechnical-alignment","text":"High","title":"Architecture/Technical alignment"},{"location":"swft-auth/","text":"Introduction Test SWFT needs a secure method to enable both vendors (with no WEL accounts) and WEL users to interact with SWFT UI and APIs. Functional requirements FR1: Users (WEL and external vendors) use email addresses as username to authenticate to SWFT. That means: Woodside email address for WEL users Business email address for vendors (B2B external users) Individual email address for vendors (B2C external users) who don't have an business email setup. FR2: WEL users must be able to use their existing Woodside credentials (email addresses and passwords) to authenticate to SWFT. FR3: SWFT must support Single Sign On for WEL users. FR4: Multiple user accounts per vendor are permitted. FR5: SWFT must be able to differentiate between external users and WEL users. Vendor users can only view and update material lead times belonging to their organisation. WEL users can perform cross-organisation operations. FR6: SWFT must comply with WEL security standards and guidelines for authentication and authorisation. FR7: The auth design must support seamless transitions/migrations when other SWFT products are rolled out. FR8: The auth supports approximately 20 vendors for the MVP. FR9: External users must only have access to SWFT and no other WEL services. Non functional requirements NFR1: External users should be able to use their existing email credentials (email addresses and passwords) to authenticate to SWFT. There is no need to create and manage SWFT-specific credentials. NFR2: SWFT should support Single Sign On for external users. This requires: B2B setup for business-email vendors B2C setup for individual-email vendors NFR3: External users might self sign up for SWFT if permitted to do so. NFR4: SWFT uses a unified interface to authenticate both WEL users and external users. SWFT preferred implementation 1st preference Option 2 2nd preference Option 1 Implementation options Option 1 - Full federation mode - Setup AWS Cognito to federate to WEL Azure AD for WEL users, 3rd party vendor IdPs for B2B external users and social IdPs for B2C external users WEL users login using their WEL credentials using a federated IdP setup with WEL Azure AD. See here for a step-by-step guide on how to federate to Azure AD using SAML. For B2B vendor users, configure Cognito to federate to the vendor IdP (similar to WEL Azure AD). Cognito supports both SAML and OIDC IdPs. For or B2C vendor users, enable Social identity providers support in Cognito (such as Google, Facebook). Use Cognito user pool as the authoriser to authorise API access (see here) sequenceDiagram autonumber actor user as SWFT users (both WEL and external) participant ui as SWFT Front-end participant authui as Cognito Hosted Login UI participant welui as WEL Login UI participant rdui as 3rd party Login UI participant api as SWFT API Gateway participant auth as AWS Cognito participant welauth as WEL Azure Ad participant rdauth as 3rd party Identity Provider user ->> ui: Open SWFT in browser ui ->> ui: Check whether vendor is already logged in alt not authenticated ui ->> authui: Redirect to Cognito built-in Login page user ->> authui: Select method to login (Google, WEL portal, etc) alt WEL users authui ->> welui: Redirect to WEL Login page user ->> welui: Enter credentials welui ->> welauth: Submit WEL user credentials welauth ->> welauth: Process login credentials welauth -->> auth: Successful authentication else External B2B and B2C users authui ->> rdui: Redirect to 3rd-party IdP login page (including social login) user ->> rdui: Enter credentials rdui ->> rdauth: Submit user credentials rdauth ->> rdauth: Process login credentials rdauth -->> auth: Successful authentication end end auth ->> auth: Generate auth code auth -->> ui: return auth code ui ->> auth: Request for OAuth tokens using auth code and client id auth ->> auth: Generate access token, id token, refresh token auth -->> ui: Return tokens ui ->> api: Access protected resource api ->> auth: Ask to perform auth check auth ->> auth: Perform auth check auth -->> api: authorised api -->> ui: Return requested resource Pros Cognito is a robust and secure Auth-As-A-Service option. Cognito is HIPAA eligible and PCI DSS, SOC, and ISO/IEC 27001, ISO/IEC 27017, ISO/IEC 27018, and ISO 9001 compliant. The squad can move fast as the only dependency is to integrate with WEL Azure AD. The SWFT team controls and configures 3rd party Idp and social integrations. Cognito offers a hosted login page which is hardened by AWS. Fuse has implemented this pattern for Petronas users. See https://confluence.woodside.com.au/x/W6EnBg. All users (WEL and external users) can use their existing credentials (usernames and passwords) to authenticate to SWFT. There is no SWFT specific credentials for vendors to manage. Very flexible option with the ability to customise auth steps with AWS Lambda. Cons Whitelisting vendor users (in either B2B or B2C setup) requires custom Cognito authentication hooks. See here. Alternatively, for B2B accounts, the vendor can help setup custom scopes for SWFT applications. Since all OAuth tokens are issued by Cognito, if SWFT API is to be hosted on Mule, there are additional auth work required. Need to customise Cognito UI to have WEL look and feel. Cognito has not been used in Accelerator. This would require substantial effort to get the pattern approved. Overhead to maintain Cognito infrastructure and information. There are some user information (email address, name) maintained outside WEL Azure AD. Having said that, there is no information identified as Confidential PIR.","title":"SWFT Auth"},{"location":"swft-auth/#introduction-test","text":"SWFT needs a secure method to enable both vendors (with no WEL accounts) and WEL users to interact with SWFT UI and APIs.","title":"Introduction Test"},{"location":"swft-auth/#functional-requirements","text":"FR1: Users (WEL and external vendors) use email addresses as username to authenticate to SWFT. That means: Woodside email address for WEL users Business email address for vendors (B2B external users) Individual email address for vendors (B2C external users) who don't have an business email setup. FR2: WEL users must be able to use their existing Woodside credentials (email addresses and passwords) to authenticate to SWFT. FR3: SWFT must support Single Sign On for WEL users. FR4: Multiple user accounts per vendor are permitted. FR5: SWFT must be able to differentiate between external users and WEL users. Vendor users can only view and update material lead times belonging to their organisation. WEL users can perform cross-organisation operations. FR6: SWFT must comply with WEL security standards and guidelines for authentication and authorisation. FR7: The auth design must support seamless transitions/migrations when other SWFT products are rolled out. FR8: The auth supports approximately 20 vendors for the MVP. FR9: External users must only have access to SWFT and no other WEL services.","title":"Functional requirements"},{"location":"swft-auth/#non-functional-requirements","text":"NFR1: External users should be able to use their existing email credentials (email addresses and passwords) to authenticate to SWFT. There is no need to create and manage SWFT-specific credentials. NFR2: SWFT should support Single Sign On for external users. This requires: B2B setup for business-email vendors B2C setup for individual-email vendors NFR3: External users might self sign up for SWFT if permitted to do so. NFR4: SWFT uses a unified interface to authenticate both WEL users and external users. SWFT preferred implementation 1st preference Option 2 2nd preference Option 1","title":"Non functional requirements"},{"location":"swft-auth/#implementation-options","text":"","title":"Implementation options"},{"location":"swft-auth/#option-1-full-federation-mode-setup-aws-cognito-to-federate-to-wel-azure-ad-for-wel-users-3rd-party-vendor-idps-for-b2b-external-users-and-social-idps-for-b2c-external-users","text":"WEL users login using their WEL credentials using a federated IdP setup with WEL Azure AD. See here for a step-by-step guide on how to federate to Azure AD using SAML. For B2B vendor users, configure Cognito to federate to the vendor IdP (similar to WEL Azure AD). Cognito supports both SAML and OIDC IdPs. For or B2C vendor users, enable Social identity providers support in Cognito (such as Google, Facebook). Use Cognito user pool as the authoriser to authorise API access (see here) sequenceDiagram autonumber actor user as SWFT users (both WEL and external) participant ui as SWFT Front-end participant authui as Cognito Hosted Login UI participant welui as WEL Login UI participant rdui as 3rd party Login UI participant api as SWFT API Gateway participant auth as AWS Cognito participant welauth as WEL Azure Ad participant rdauth as 3rd party Identity Provider user ->> ui: Open SWFT in browser ui ->> ui: Check whether vendor is already logged in alt not authenticated ui ->> authui: Redirect to Cognito built-in Login page user ->> authui: Select method to login (Google, WEL portal, etc) alt WEL users authui ->> welui: Redirect to WEL Login page user ->> welui: Enter credentials welui ->> welauth: Submit WEL user credentials welauth ->> welauth: Process login credentials welauth -->> auth: Successful authentication else External B2B and B2C users authui ->> rdui: Redirect to 3rd-party IdP login page (including social login) user ->> rdui: Enter credentials rdui ->> rdauth: Submit user credentials rdauth ->> rdauth: Process login credentials rdauth -->> auth: Successful authentication end end auth ->> auth: Generate auth code auth -->> ui: return auth code ui ->> auth: Request for OAuth tokens using auth code and client id auth ->> auth: Generate access token, id token, refresh token auth -->> ui: Return tokens ui ->> api: Access protected resource api ->> auth: Ask to perform auth check auth ->> auth: Perform auth check auth -->> api: authorised api -->> ui: Return requested resource","title":"Option 1 - Full federation mode - Setup AWS Cognito to federate to WEL Azure AD for WEL users, 3rd party vendor IdPs for B2B external users and social IdPs for B2C external users"},{"location":"swft-auth/#pros","text":"Cognito is a robust and secure Auth-As-A-Service option. Cognito is HIPAA eligible and PCI DSS, SOC, and ISO/IEC 27001, ISO/IEC 27017, ISO/IEC 27018, and ISO 9001 compliant. The squad can move fast as the only dependency is to integrate with WEL Azure AD. The SWFT team controls and configures 3rd party Idp and social integrations. Cognito offers a hosted login page which is hardened by AWS. Fuse has implemented this pattern for Petronas users. See https://confluence.woodside.com.au/x/W6EnBg. All users (WEL and external users) can use their existing credentials (usernames and passwords) to authenticate to SWFT. There is no SWFT specific credentials for vendors to manage. Very flexible option with the ability to customise auth steps with AWS Lambda.","title":"Pros"},{"location":"swft-auth/#cons","text":"Whitelisting vendor users (in either B2B or B2C setup) requires custom Cognito authentication hooks. See here. Alternatively, for B2B accounts, the vendor can help setup custom scopes for SWFT applications. Since all OAuth tokens are issued by Cognito, if SWFT API is to be hosted on Mule, there are additional auth work required. Need to customise Cognito UI to have WEL look and feel. Cognito has not been used in Accelerator. This would require substantial effort to get the pattern approved. Overhead to maintain Cognito infrastructure and information. There are some user information (email address, name) maintained outside WEL Azure AD. Having said that, there is no information identified as Confidential PIR.","title":"Cons"}]}